syntax = "proto3";

import "nanopb.proto";

enum MessageType {
    NOP        = 0;
    FREE_MEM   = 1;
    TEST_DEBUG = 2;
}

enum Result {
    OK              = 0;
    DEBUG           = 1;
    INVALID_REQUEST = 2;
}

message Request {
    MessageType type = 1;
    oneof payload {
        bytes buffer = 2;
    }
}

message Reply {
    MessageType type           = 1;
    Result      result         = 2;
    string      additionalInfo = 3;
    oneof payload {
        string  debug_message = 4;
        uint32  free_mem      = 5;
    }
}
